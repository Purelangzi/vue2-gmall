"use strict";(self["webpackChunkvue2_gmall"]=self["webpackChunkvue2_gmall"]||[]).push([[752],{5752:function(e,r,s){s.r(r),s.d(r,{default:function(){return d}});var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"register-container"},[r("div",{staticClass:"register"},[r("h3",[e._v(" 注册新用户 "),r("span",{staticClass:"go"},[e._v("我有账号，去 "),r("router-link",{attrs:{to:"/login"}},[e._v("登陆")])],1)]),r("el-form",{ref:"form",staticClass:"elForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"medium "}},[r("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[r("el-input",{attrs:{autocomplete:"on",maxlength:"11",placeholder:"请输入你的手机号"},model:{value:e.form.phone,callback:function(r){e.$set(e.form,"phone",r)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{label:"验证码:",prop:"code"}},[r("el-input",{attrs:{type:"primary ",placeholder:"输入手机号才能获取验证码"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}}),r("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"info ",size:"default",disabled:e.disabled,round:""},on:{click:e.getCode}},[e._v(e._s(e.buttonName))])],1),r("el-form-item",{attrs:{label:"登录密码:",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入你的登录密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"确认密码:",prop:"password1"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.form.password1,callback:function(r){e.$set(e.form,"password1",r)},expression:"form.password1"}})],1),r("el-form-item",{attrs:{prop:"agree"}},[r("el-checkbox",{attrs:{indeterminate:!1},on:{change:function(r){e.form.agree=!e.form.agree}},model:{value:e.form.agree,callback:function(r){e.$set(e.form,"agree",r)},expression:"form.agree"}},[e._v("同意协议并注册《尚品汇用户协议》")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"default"},on:{click:e.userRegister}},[e._v("完成注册")])],1)],1)],1),e._m(0)])},o=[function(){var e=this,r=e._self._c;return r("div",{staticClass:"copyright"},[r("ul",[r("li",[e._v("关于我们")]),r("li",[e._v("联系我们")]),r("li",[e._v("联系客服")]),r("li",[e._v("商家入驻")]),r("li",[e._v("营销中心")]),r("li",[e._v("手机尚品汇")]),r("li",[e._v("销售联盟")]),r("li",[e._v("尚品汇社区")])]),r("div",{staticClass:"address"},[e._v("地址：北京市昌平区宏福科技园综合楼6层")]),r("div",{staticClass:"beian"},[e._v("京ICP备19006430号")])])}],a=(s(7658),{name:"Register",data(){const e=(e,r,s)=>{const t=/^[1]([3-9])[0-9]{9}$/;t.test(r)?s():s(new Error("手机格式不正确!请输入11位手机号"))},r=(e,r,s)=>{r!==this.form.password?s(new Error("两次输入密码不一致!")):s()};return{disabled:!1,buttonName:"获取验证码",form:{phone:void 0,code:void 0,password:void 0,password1:void 0,agree:!1},rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"密码长度6-12位"}],password1:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:r,trigger:"blur"}],agree:[{required:!0,message:"请点击同意",trigger:"blur"}]}}},methods:{async getCode(){const e=/^[1]([3-9])[0-9]{9}$/;if(e.test(this.form.phone))try{await this.$store.dispatch("user/getCode",this.form.phone),this.form.code=this.$store.state.user.code;let e=59,r=setInterval((()=>{e<1?(this.disabled=!1,this.buttonName="获取验证码",e=59,clearInterval(r)):(this.disabled=!0,this.buttonName=e--+"s后重发")}),1e3)}catch(r){alert(r.message)}else this.$message.warning("输入正确的手机号")},userRegister(){this.$refs.form.validate((async e=>{if(!e)return console.log("error submit!!"),!1;{const{phone:e,password:s,code:t}=this.form;try{await this.$store.dispatch("user/userRegister",{phone:e,password:s,code:t}),this.$router.push("/login")}catch(r){alert(r.message)}}}))}}}),i=a,l=s(3736),n=(0,l.Z)(i,t,o,!1,null,"57ff74fc",null),d=n.exports}}]);