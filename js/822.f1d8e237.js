"use strict";(self["webpackChunkvue2_gmall"]=self["webpackChunkvue2_gmall"]||[]).push([[822],{5855:function(a,s,t){t.r(s),t.d(s,{default:function(){return g}});var e=function(){var a=this,s=a._self._c;return s("div",[s("TypeNav"),s("div",{staticClass:"main"},[s("div",{staticClass:"py-container"},[s("div",{staticClass:"bread"},[a._m(0),s("ul",{staticClass:"fl sui-tag"},[s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.categoryName,expression:"searchParams.categoryName"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.categoryName)),s("i",{on:{click:a.removeCategoryName}},[a._v("x")])]),s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.keyword,expression:"searchParams.keyword"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.keyword)),s("i",{on:{click:a.removeKeyWord}},[a._v("x")])]),s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.trademark,expression:"searchParams.trademark"}],staticClass:"with-x"},[a._v(" "+a._s(a.searchParams.trademark.split(":")[1])),s("i",{on:{click:a.removeTradeMark}},[a._v("x")])]),a._l(a.searchParams.props,(function(t,e){return s("li",{key:e,staticClass:"with-x"},[a._v(" "+a._s(t.split(":")[2])+":"+a._s(t.split(":")[1])+" "),s("i",{on:{click:function(s){return a.removeAttr(t)}}},[a._v("x")])])}))],2)]),s("SearchSelector",{attrs:{attrsList:a.attrsList,trademarkList:a.trademarkList},on:{trademarkInfo:a.trademarkInfo,attrInfo:a.attrInfo}}),s("div",{staticClass:"details clearfix"},[s("div",{staticClass:"sui-navbar"},[s("div",{staticClass:"navbar-inner filter"},[s("ul",{staticClass:"sui-nav"},[s("li",{class:{active:a.isOne},on:{click:function(s){return a.changeOrder(1)}}},[s("a",[a._v("综合"),s("span",{directives:[{name:"show",rawName:"v-show",value:a.isOne,expression:"isOne"}],class:["iconfont",a.isAsc]})])]),s("li",{class:{active:a.isTwo},on:{click:function(s){return a.changeOrder(2)}}},[s("a",[a._v("价格"),s("span",{directives:[{name:"show",rawName:"v-show",value:a.isTwo,expression:"isTwo"}],class:["iconfont",a.isAsc]})])])])])]),s("div",{staticClass:"goods-list"},[s("ul",{staticClass:"yui3-g"},a._l(a.goodsList,(function(t){return s("li",{key:t.id,staticClass:"yui3-u-1-5"},[s("div",{staticClass:"list-wrap"},[s("div",{staticClass:"p-img"},[s("a",{attrs:{href:"javascript:"},on:{click:function(s){return a.goProductDetail(t.id)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.defaultImg,expression:"good.defaultImg"}]})])]),s("div",{staticClass:"price"},[s("strong",[s("em",[a._v("¥")]),s("i",[a._v(a._s(t.price))])])]),s("div",{staticClass:"attr"},[s("a",{attrs:{target:"_blank",href:"#"}},[a._v(a._s(t.title))])]),a._m(1,!0),a._m(2,!0)])])})),0)]),s("Pagination",{attrs:{pageNo:a.searchParams.pageNo,pageSize:a.searchParams.pageSize,total:a.total,continues:5},on:{getPageNo:a.getPageNo}})],1)],1)])],1)},r=[function(){var a=this,s=a._self._c;return s("ul",{staticClass:"fl sui-breadcrumb"},[s("li",[s("a",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"commit"},[s("i",{staticClass:"command"},[a._v("已有"),s("span",[a._v("2000")]),a._v("人评价")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"operate"},[s("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),s("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}],i=(t(7658),function(){var a=this,s=a._self._c;return s("div",{staticClass:"clearfix selector"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0!==a.trademarkList.length,expression:"trademarkList.length!==0"}],staticClass:"type-wrap logo"},[s("div",{staticClass:"fl key brand"},[a._v("品牌")]),s("div",{staticClass:"value logos"},[s("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(t){return s("li",{key:t.tmId,on:{click:function(s){return a.trademarkHandler(t)}}},[a._v(a._s(t.tmName))])})),0)]),a._m(0)]),a._l(a.attrsList,(function(t){return s("div",{key:t.attrId,staticClass:"type-wrap"},[s("div",{staticClass:"fl key"},[a._v(a._s(t.attrName))]),s("div",{staticClass:"fl value"},[s("ul",{staticClass:"type-list"},a._l(t.attrValueList,(function(e,r){return s("li",{key:r,on:{click:function(s){return a.attrInfo(t,e)}}},[s("a",[a._v(a._s(e))])])})),0)]),s("div",{staticClass:"fl ext"})])}))],2)}),c=[function(){var a=this,s=a._self._c;return s("div",{staticClass:"ext"},[s("a",{staticClass:"sui-btn",attrs:{href:"javascript:void(0);"}},[a._v("多选")]),s("a",{attrs:{href:"javascript:void(0);"}},[a._v("更多")])])}],o={name:"SearchSelector",props:["attrsList","trademarkList"],methods:{trademarkHandler(a){this.$emit("trademarkInfo",a)},attrInfo(a,s){this.$emit("attrInfo",a,s)}}},n=o,l=t(3736),h=(0,l.Z)(n,i,c,!1,null,"8ab11aa6",null),d=h.exports,m=t(3822),u={name:"Search",data(){return{searchParams:{category1Id:void 0,category2Id:void 0,category3Id:void 0,categoryName:void 0,keyword:void 0,order:"1:desc",pageNo:1,pageSize:3,props:[],trademark:""}}},components:{SearchSelector:d},beforeMount(){Object.assign(this.searchParams,this.$route.query,this.$route.params)},mounted(){this.getSearchList()},computed:{...(0,m.Se)("search",["attrsList","goodsList","trademarkList"]),isOne(){return this.searchParams.order.includes("1")},isTwo(){return this.searchParams.order.includes("2")},isAsc(){return this.searchParams.order.includes("desc")?"icon-direction-down":"icon-direction-up"},...(0,m.rn)({total:a=>a.search.searchList.total})},methods:{getSearchList(){this.$store.dispatch("search/getSearchList",this.searchParams)},removeCategoryName(){this.searchParams.categoryName=void 0,this.$router.push({name:"search",params:this.$route.params})},removeKeyWord(){this.searchParams.keyword=void 0,this.$router.push({name:"search",query:this.$route.query}),this.$bus.$emit("clear")},removeTradeMark(){this.searchParams.trademark="",this.getSearchList()},removeAttr(a){let s=this.searchParams.props.indexOf(a);this.searchParams.props.splice(s,1),this.getSearchList()},trademarkInfo(a){a.tmName!=this.searchParams.trademark.split(":")[1]&&(this.searchParams.trademark=`${a.tmId}:${a.tmName}`,this.getSearchList())},attrInfo(a,s){const t=`${a.attrId}:${s}:${a.attrName}`;this.searchParams.props.includes(t)||(this.searchParams.props.push(t),this.getSearchList())},changeOrder(a){let s=this.searchParams.order.split(":")[0],t=this.searchParams.order.split(":")[1],e="";e=a==s?`${s}:${"desc"==t?"asc":"desc"}`:`${a}:desc`,this.searchParams.order=e,this.getSearchList()},getPageNo(a){a!=this.searchParams.pageNo&&(this.searchParams.pageNo=a,this.getSearchList())},goProductDetail(a){this.$router.push({name:"detail",params:{skuId:a}})}},watch:{$route:{handler(){this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0,Object.assign(this.searchParams,this.$route.query,this.$route.params),this.getSearchList()}}}},v=u,p=(0,l.Z)(v,e,r,!1,null,"468e1c0c",null),g=p.exports}}]);